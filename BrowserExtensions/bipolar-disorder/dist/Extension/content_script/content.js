const m=()=>{console.log("Content script loaded and running..."),chrome.runtime.onMessage.addListener((a,g,l)=>{if(a.action==="getPageContent"){let e="";const t=document.querySelector("article"),i=/Â©.*?(\n|$)|Copyright.*?(\n|$)|\*Note:.*?(\n|$)/g;if(t){const s=t.querySelectorAll("span"),o=t.querySelectorAll("footer"),c=t.querySelectorAll("a");s.forEach(r=>r.remove()),o.forEach(r=>r.remove()),c.forEach(r=>r.remove()),e=t.innerText}else e=Array.from(document.body.querySelectorAll("p")).map(o=>{const c=o.querySelectorAll("span"),r=o.querySelectorAll("footer"),u=o.querySelectorAll("a");return c.forEach(n=>n.remove()),r.forEach(n=>n.remove()),u.forEach(n=>n.remove()),o.innerText}).join(`
`);e=e.replace(i,"").trim(),e=e.replace(/\n\s*\n/g,`
`).trim(),l({content:e})}if(a.action==="getSearchResults"){console.log("Capturing search results...");const e=document.querySelector('input[name="q"]')?document.querySelector('input[name="q"]').value:"No search term found";return l({term:e}),!0}}),window.addEventListener("load",()=>{console.log("Page loaded.")})};m();
